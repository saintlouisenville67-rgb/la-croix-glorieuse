<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DÃ©votion MisÃ©ricorde Divine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --misericorde-red: #b91c1c;
            --bg-light: #f8fafc;
            --card-light: #ffffff;
        }
        @media (prefers-color-scheme: dark) {
            :root { --bg-light: #0f172a; --card-light: #1e293b; }
            body { color: #f1f5f9; }
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-light);
            margin: 0; padding: 10px; padding-bottom: 80px;
        }
        .prayer-card {
            background: var(--card-light);
            border-radius: 24px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            max-width: 500px; margin: 40px auto 20px;
            min-height: 450px;
            display: flex; flex-direction: column; justify-content: space-between;
            position: relative;
        }
        .tab-content { display: none; animation: fadeIn 0.3s ease-in-out; }
        .tab-content.active { display: flex; flex-direction: column; flex: 1; }
        
        .bead-btn {
            width: 65px; height: 65px; border-radius: 50%;
            background: var(--card-light); border: 1px solid #e2e8f0;
            display: flex; align-items: center; justify-content: center;
            margin: 10px auto; cursor: pointer; transition: all 0.2s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .bead-btn:active { transform: scale(0.9); background: #f1f5f9; }
        
        .progress-dot { width: 7px; height: 7px; border-radius: 50%; background: #cbd5e1; transition: all 0.3s; }
        .progress-dot.active { background: var(--misericorde-red); transform: scale(1.3); }

        .neuvaine-day-btn {
            padding: 8px; border-radius: 12px; border: 1px solid #e2e8f0;
            font-size: 11px; font-weight: bold; cursor: pointer;
        }
        .neuvaine-day-btn.active { background: var(--misericorde-red); color: white; border-color: var(--misericorde-red); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="prayer-card">
        <div id="tab-chapelet" class="tab-content active">
            <h2 id="step-title" class="text-[10px] font-black uppercase tracking-[0.3em] text-red-700 text-center mb-4">DÃ©but</h2>
            
            <div id="quote-box" class="bg-red-50 dark:bg-red-950/30 p-3 rounded-xl text-xs italic text-red-800 dark:text-red-200 mb-4 hidden border border-red-100 dark:border-red-900/50"></div>

            <div class="flex-1 flex items-center justify-center px-2">
                <p id="prayer-content" class="text-lg italic font-serif leading-relaxed text-center text-slate-700 dark:text-slate-200"></p>
            </div>

            <div class="mt-4 text-center">
                <div id="progress-container" class="flex justify-center gap-2 mb-3 hidden"></div>
                <p id="counter-text" class="text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-1"></p>
                <div class="flex items-center justify-center gap-6">
                    <button onclick="prevStep()" id="prev-btn" class="text-slate-300 opacity-0 transition-opacity"><svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="m15 18-6-6 6-6"/></svg></button>
                    <button onclick="nextStep()" class="bead-btn"><span id="bead-icon" class="text-2xl">ðŸ“¿</span></button>
                    <div class="w-6"></div>
                </div>
            </div>
        </div>

        <div id="tab-neuvaine" class="tab-content">
            <h2 class="text-[10px] font-black uppercase tracking-[0.3em] text-red-700 text-center mb-4">Neuvaine Ã  la MisÃ©ricorde</h2>
            
            <div class="flex flex-wrap justify-center gap-1 mb-4">
                <script>
                    for(let i=1; i<=9; i++) {
                        document.write(`<button onclick="showNeuvaine(${i})" id="nday-${i}" class="neuvaine-day-btn ${i===1?'active':''}">J${i}</button>`);
                    }
                </script>
            </div>

            <div class="flex-1 overflow-y-auto px-1">
                <h3 id="neuvaine-title" class="font-bold text-sm text-red-800 dark:text-red-400 mb-2 uppercase"></h3>
                <p id="neuvaine-intent" class="text-xs font-bold text-slate-500 mb-3 italic"></p>
                <p id="neuvaine-text" class="text-[15px] leading-relaxed font-serif text-slate-700 dark:text-slate-300"></p>
            </div>
        </div>

        <div id="tab-heure" class="tab-content">
            <h2 class="text-[10px] font-black uppercase tracking-[0.3em] text-red-700 text-center mb-6">L'Heure de la MisÃ©ricorde (15h)</h2>
            <div class="flex-1 flex flex-col justify-center space-y-6 text-center italic font-serif text-slate-700 dark:text-slate-200">
                <div class="p-4 bg-red-50 dark:bg-red-900/20 rounded-2xl border-l-4 border-red-700">
                    "Ã€ trois heures, implore Ma misÃ©ricorde, tout particuliÃ¨rement pour les pÃ©cheurs et, ne fÃ»t-ce que pour un bref instant, plonge-toi dans Ma Passion."
                </div>
                <p class="text-lg">Â« Ã” Sang et Eau, qui avez jailli du CÅ“ur de JÃ©sus comme source de MisÃ©ricorde pour nous, j'ai confiance en Vous. Â»</p>
                <p class="text-xs text-slate-400 non-italic">Ã€ cette heure, Je ne saurais rien refuser Ã  lâ€™Ã¢me qui Me prie par Ma Passion. (PJ 1320)</p>
            </div>
        </div>
    </div>

    <nav class="fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800 flex justify-around py-3">
        <button onclick="switchTab('chapelet')" id="nav-chapelet" class="flex flex-col items-center text-red-700">
            <span class="text-xl">ðŸ“¿</span><span class="text-[9px] font-bold uppercase mt-1">Chapelet</span>
        </button>
        <button onclick="switchTab('neuvaine')" id="nav-neuvaine" class="flex flex-col items-center text-slate-400">
            <span class="text-xl">ðŸ“œ</span><span class="text-[9px] font-bold uppercase mt-1">Neuvaine</span>
        </button>
        <button onclick="switchTab('heure')" id="nav-heure" class="flex flex-col items-center text-slate-400">
            <span class="text-xl">ðŸ•’</span><span class="text-[9px] font-bold uppercase mt-1">15h00</span>
        </button>
    </nav>

    <script>
        // --- LOGIQUE NAVIGATION ---
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById('tab-' + tabId).classList.add('active');
            
            document.querySelectorAll('nav button').forEach(b => b.classList.replace('text-red-700', 'text-slate-400'));
            document.getElementById('nav-' + tabId).classList.replace('text-slate-400', 'text-red-700');
        }

        // --- LOGIQUE CHAPELET ---
        let currentStep = 0, currentBead = 0, currentDecade = 1;
        const faustineQuotes = [
            "Â« Plus la misÃ¨re est grande, plus elle a droit Ã  Ma misÃ©ricorde. Â» (PJ 1182)",
            "Â« Je ne peux punir mÃªme le plus grand pÃ©cheur s'il invoque Ma pitiÃ©. Â» (PJ 1146)",
            "Â« Dis Ã  l'Ã¢me souffrante qu'elle se serre contre Mon CÅ“ur misÃ©ricordieux. Â» (PJ 1486)",
            "Â« Ma MisÃ©ricorde est plus grande que tes pÃ©chÃ©s et ceux du monde entier. Â» (PJ 1485)",
            "Â« L'humanitÃ© n'aura pas de paix tant qu'elle ne s'adressera pas Ã  Ma MisÃ©ricorde. Â» (PJ 300)"
        ];
        const steps = [
            { title: "DÃ©but", text: "Au nom du PÃ¨re, et du Fils, et du Saint-Esprit. Amen." },
            { title: "Introduction", text: "Notre PÃ¨re... Je vous salue Marie... Je crois en Dieu..." },
            { title: "Gros Grain", text: "PÃ¨re Ã‰ternel, je Vous offre le Corps et le Sang, l'Ã‚me et la DivinitÃ© de Votre Fils Bien-AimÃ©, Notre Seigneur JÃ©sus-Christ, en rÃ©paration de nos pÃ©chÃ©s et de ceux du monde entier." },
            { title: "Dizaine", text: "Par Sa douloureuse Passion, ayez pitiÃ© de nous et du monde entier." },
            { title: "Conclusion", text: "Dieu Saint, Dieu Fort, Dieu Ã‰ternel, ayez pitiÃ© de nous et du monde entier. (3 fois)" },
            { title: "Fin", text: "JÃ©sus MisÃ©ricordieux, j'ai confiance en Vous !" }
        ];

        function updateUI() {
            const step = steps[currentStep];
            document.getElementById('prayer-content').innerText = step.text;
            document.getElementById('step-title').innerText = step.title;
            
            const qBox = document.getElementById('quote-box');
            if (currentStep === 2) {
                qBox.innerText = faustineQuotes[currentDecade - 1];
                qBox.classList.remove('hidden');
            } else { qBox.classList.add('hidden'); }

            const prog = document.getElementById('progress-container');
            const count = document.getElementById('counter-text');
            const icon = document.getElementById('bead-icon');

            if (currentStep === 3) {
                prog.classList.remove('hidden');
                count.innerText = `Dizaine ${currentDecade} â€¢ Grain ${currentBead + 1}/10`;
                icon.innerText = "ðŸ”¸";
                renderDots();
            } else {
                prog.classList.add('hidden');
                count.innerText = "";
                icon.innerText = (currentStep === 2) ? "âšª" : (currentStep >= 4 ? "âœ¨" : "ðŸ“¿");
            }
            document.getElementById('prev-btn').style.opacity = currentStep === 0 ? "0" : "1";
        }

        function renderDots() {
            const container = document.getElementById('progress-container');
            container.innerHTML = "";
            for (let i = 0; i < 10; i++) {
                const dot = document.createElement('div');
                dot.className = `progress-dot ${i <= currentBead ? 'active' : ''}`;
                container.appendChild(dot);
            }
        }

        function nextStep() {
            if (currentStep === 3) {
                if (currentBead < 9) currentBead++;
                else {
                    currentBead = 0;
                    if (currentDecade < 5) { currentDecade++; currentStep = 2; }
                    else currentStep = 4;
                }
            } else if (currentStep < 5) currentStep++;
            updateUI();
        }

        function prevStep() {
            if (currentStep === 3 && currentBead > 0) currentBead--;
            else if (currentStep === 3 && currentBead === 0) currentStep = 2;
            else if (currentStep === 2 && currentDecade > 1) { currentDecade--; currentStep = 3; currentBead = 9; }
            else if (currentStep > 0) currentStep--;
            updateUI();
        }

        // --- LOGIQUE NEUVAINE ---
        const neuvaineData = {
            1: { t: "Premier Jour", i: "L'humanitÃ© entiÃ¨re, particuliÃ¨rement tous les pÃ©cheurs.", p: "Aujourdâ€™hui, amÃ¨ne-moi lâ€™humanitÃ© entiÃ¨re, et particuliÃ¨rement tous les pÃ©cheurs et immerge-les dans lâ€™ocÃ©an de ma misÃ©ricorde. Par lÃ , tu me consoleras dans cette amÃ¨re tristesse que me cause la perte des Ã¢mes." },
            2: { t: "DeuxiÃ¨me Jour", i: "Les Ã¢mes sacerdotales et religieuses.", p: "Aujourdâ€™hui, amÃ¨ne-moi les Ã¢mes sacerdotales et religieuses et immerge-les dans mon insondable misÃ©ricorde. Elles m'ont donnÃ© la force d'endurer mon amÃ¨re Passion." },
            3: { t: "TroisiÃ¨me Jour", i: "Les Ã¢mes pieuses et fidÃ¨les.", p: "Aujourdâ€™hui, amÃ¨ne-moi toutes les Ã¢mes pieuses et fidÃ¨les et immerge-les dans lâ€™ocÃ©an de ma misÃ©ricorde. Ces Ã¢mes mâ€™ont consolÃ© sur le chemin du Calvaire." },
            4: { t: "QuatriÃ¨me Jour", i: "Les paÃ¯ens et ceux qui ne me connaissent pas encore.", p: "Aujourdâ€™hui, amÃ¨ne-moi les paÃ¯ens et ceux qui ne me connaissent pas encore. Je pensais aussi Ã  eux durant mon amÃ¨re Passion et leur futur zÃ¨le consolait mon CÅ“ur." },
            5: { t: "CinquiÃ¨me Jour", i: "Les Ã¢mes des hÃ©rÃ©tiques et des apostats.", p: "Aujourdâ€™hui, amÃ¨ne-moi les Ã¢mes des hÃ©rÃ©tiques et des apostats et immerge-les dans lâ€™ocÃ©an de ma misÃ©ricorde. Dans mon amÃ¨re Passion, elles me dÃ©chiraient le corps et le cÅ“ur, câ€™est-Ã -dire mon Ã‰glise." },
            6: { t: "SixiÃ¨me Jour", i: "Les Ã¢mes douces et humbles, et celles des petits enfants.", p: "Aujourdâ€™hui, amÃ¨ne-moi les Ã¢mes douces et humbles, ainsi que celles des petits enfants, et immerge-les dans ma misÃ©ricorde. Ce sont elles qui ressemblent le plus Ã  mon CÅ“ur." },
            7: { t: "SeptiÃ¨me Jour", i: "Les Ã¢mes qui vÃ©nÃ¨rent et glorifient particuliÃ¨rement ma misÃ©ricorde.", p: "Aujourdâ€™hui, amÃ¨ne-moi les Ã¢mes qui vÃ©nÃ¨rent et glorifient particuliÃ¨rement ma misÃ©ricorde. Ces Ã¢mes ont le plus partagÃ© ma Passion et sont les reflets vivants de mon CÅ“ur compatissant." },
            8: { t: "HuitiÃ¨me Jour", i: "Les Ã¢mes du purgatoire.", p: "Aujourdâ€™hui, amÃ¨ne-moi les Ã¢mes qui sont au purgatoire et immerge-les dans lâ€™abÃ®me de ma misÃ©ricorde. Que les flots de mon Sang rafraÃ®chissent leurs brÃ»lures !" },
            9: { t: "NeuviÃ¨me Jour", i: "Les Ã¢mes froides.", p: "Aujourdâ€™hui, amÃ¨ne-moi les Ã¢mes froides et immerge-les dans lâ€™abÃ®me de ma misÃ©ricorde. Ce sont ces Ã¢mes qui blessent le plus douloureusement mon CÅ“ur." }
        };

        function showNeuvaine(day) {
            document.querySelectorAll('.neuvaine-day-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('nday-'+day).classList.add('active');
            document.getElementById('neuvaine-title').innerText = neuvaineData[day].t;
            document.getElementById('neuvaine-intent').innerText = "Intention : " + neuvaineData[day].i;
            document.getElementById('neuvaine-text').innerText = neuvaineData[day].p;
        }

        // Initialisation
        updateUI();
        showNeuvaine(1);
    </script>
</body>
</html>
